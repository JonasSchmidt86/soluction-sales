<div class="card mt-3">
  <div class="card-header text-center bg-primary text-white">
    <h4>Orçamentos</h4>
  </div>
  <div class="card-body">
    <div class="mb-3">
      <%= link_to 'Novo Orçamento', new_collaborators_backoffice_orcamento_path, class: 'btn btn-primary' %>
    </div>
    <div class="table-responsive">
      <table class="table table-sm align-middle table-light table-striped table-hover table-borderless">
        <thead>
          <tr>
            <th>Código</th>
            <th>Cliente</th>
            <th>Data</th>
            <th>Validade</th>
            <th>Valor Total</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @orcamentos.each do |orcamento| %>
            <tr>
              <td><%= orcamento.cod_orcamento %></td>
              <td><%= orcamento.pessoa.nome %></td>
              <td><%= l(orcamento.data_orcamento, format: :short) %></td>
              <td><%= orcamento.data_validade ? l(orcamento.data_validade) : '-' %></td>
              <td><%= number_to_currency(orcamento.valortotal) %></td>
              <td>
                <% case orcamento.status %>
                <% when 'pendente' %>
                  <span class="badge bg-warning">Pendente</span>
                <% when 'aprovado' %>
                  <span class="badge bg-success">Aprovado</span>
                <% when 'convertido' %>
                  <span class="badge bg-info">Convertido</span>
                <% when 'rejeitado' %>
                  <span class="badge bg-danger">Rejeitado</span>
                <% end %>
              </td>
              <td>
                <%= link_to 'Ver', collaborators_backoffice_orcamento_path(orcamento), class: 'btn btn-info btn-sm' %>
                <%= link_to 'Editar', edit_collaborators_backoffice_orcamento_path(orcamento), class: 'btn btn-warning btn-sm' unless orcamento.convertido? %>
                <%= link_to 'Excluir', collaborators_backoffice_orcamento_path(orcamento), method: :delete, data: { confirm: 'Tem certeza?' }, class: 'btn btn-danger btn-sm' unless orcamento.convertido? %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <%= paginate @orcamentos %>
    </div>
  </div>
</div>
