<!-- Certifique-se que o Font Awesome está carregado (geralmente no <head>) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen">
    <div class="modal-content p-0" style="background: transparent; border: none; position: relative;">
      

      <div class="modal-body p-0">
        <div id="carouselImages" class="carousel slide" data-bs-ride="false">
          <div class="carousel-inner">
            <% (@produto_imagens || []).each_with_index do |imagem, index| %>
              <div class="carousel-item <%= 'active' if index == 0 %>" data-index="<%= index %>">
                
                <!-- Container com position relative pra posicionar o botão -->
                <div style="position: relative;">
                  <!-- Imagem -->
                  <%= image_tag(imagem.imagem.presence || asset_path(imagem.imagem),
                                class: "d-block w-100",
                                style: "max-height: 100vh; object-fit: contain;") %>

                  <!-- Botão sobre a imagem -->
                  <button type="button"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                          style="position: absolute; top: 20px; right: 20px;
                                background-color: red; color: white; border: none;
                                width: 40px; height: 40px; display: flex;
                                align-items: center; justify-content: center;
                                border-radius: 6px; cursor: pointer; z-index: 999;">
                    <i class="fas fa-times"></i>
                  </button>
                </div>

              </div>
            <% end %>

          </div>

          <!-- Botões do carrossel -->
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselImages" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselImages" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
          </button>
        </div>
      </div>

    </div>
  </div>
</div>
