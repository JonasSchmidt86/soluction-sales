<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Impressão</title>
    <!-- Reset completo para evitar conflitos -->
    <style>
      /* Reset completo */
      html, body, div, span, h1, h2, h3, h4, h5, h6, p, a, strong {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
      }

      /* Configurações específicas para impressão */
      /* Reset básico */
      * {
        box-sizing: border-box;
      }

      /* Estilos gerais */
      body {
        font-family: 'Times New Roman', serif !important;
        font-size: 12pt !important;
        line-height: 1.2 !important;
        margin: 0 !important;
        padding: 15px !important;
        background: white !important;
        color: #000 !important;
      }

      .promissory-wrapper {
        width: 100% !important;
        border: 2px solid #000 !important;
        padding: 10px !important;
        margin: 5px 0 !important;
        display: block !important;
        min-height: 160px !important;
        page-break-inside: avoid !important;
        background: white !important;
        box-sizing: border-box !important;
      }

      .signature {
        margin-top: 30px;
        text-align: center;
      }

      .signature-line {
        margin-top: 15px;
        border-top: 1px solid #000;
        width: 60%;
        margin-left: auto;
        margin-right: auto;
      }

      /* Configurações de página */
      @page {
        size: A4;
        margin: 5mm;
      }

      /* Estilos específicos para impressão */
      @media print {
        * {
          -webkit-print-color-adjust: exact !important;
          print-color-adjust: exact !important;
        }

        body {
          margin: 0px !important;
          padding: 18px !important;
          font-size: 11,3pt !important;
          background: white !important;
          width: 210mm !important;
          min-height: 297mm !important;
        }

        .promissory-wrapper {
          width: 200mm !important;
          min-height: 68mm !important;
          height: auto !important;
          border: 1px solid #000 !important;
          padding-left: 2mm !important;
          padding-right: 5mm !important;
          padding-top: 5mm !important;
          padding-bottom: 2mm !important;
          margin: 3mm 0 !important;
          display: block !important;
          page-break-inside: avoid !important;
          background: white !important;
          box-shadow: none !important;
          box-sizing: border-box !important;
        }


        .no-print {
          display: none !important;
        }

        .signature {
          margin-top: 45px !important;
        }

        .signature-line {
          margin-top: 20px !important;
          border-top: 1px solid #000 !important;
        }
      }
    </style>
    <script>
      // Função para imprimir automaticamente quando a página carregar
      window.onload = function() {
        // Pequeno delay para garantir que o CSS seja aplicado
        setTimeout(function() {
          window.print();
        }, 1000);
      };

      // Função para fechar a janela após impressão
      window.onafterprint = function() {
        window.close();
      };
    </script>
  </head>
  <body>
    <%= yield %>
    <!-- Botão manual de impressão (caso o automático não funcione) -->
    <div class="no-print" style="position: fixed; top: 10px; right: 10px; z-index: 9999;">
      <button onclick="window.print()" style="padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Imprimir
      </button>
    </div>
  </body>
</html>
